<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
    <!-- <noscript>Cookie Consent by <a href="https://www.FreePrivacyPolicy.com/free-cookie-consent/" rel="nofollow noopener">FreePrivacyPolicy.com</a></noscript> -->
    <!-- End Cookie Consent -->
    <title>
        <%= htmlWebpackPlugin.options.title %>
    </title>
</head>

<body>
    <noscript>
      <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <!-- Add cookie consent css & js -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script>

    <!-- Add google analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134588981-1"></script>
    <script>
        // Reads the value of a cookie by name or returns empty string
        function getCookie(name) {
            var b = document.cookie.match('(^|[^;]+)\\s*' + name + '\\s*=\\s*([^;]+)');
            return b ? b.pop() : '';
        }
        let propertyID = 'UA-134588981-1'
            // Actually starting analytics up
        function addAnalytics() {
            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }

            gtag('js', new Date());
            gtag('config', propertyID);
        }

        // Waiting for the load event
        window.addEventListener("load", function() {
            // Reading "cookieconsent_status" cookie
            const cookieConsent = getCookie('cookieconsent_status');

            // Start analytics if user consented or did not deny
            console.log(cookieConsent);
            if (cookieConsent === 'dismiss') {
                addAnalytics();
            }

            // Initialise cookie consent banner
            window.cookieconsent.initialise({
                palette: {
                    popup: {
                        background: "#efefef",
                        text: "#1E3678"
                    },
                    button: {
                        background: "#1E3678",
                        text: "#ffffff"
                    }
                },
                content: {
                    header: 'Cookies used on the website!',
                    message: 'บริษัทนวพลาสติกอุตสาหกรรม จำกัดใช้คุกกี้เพื่อให้ท่านได้รับประสบการณ์การใช้งานที่ดียิ่งขึ้น',
                    dismiss: 'ยอมรับ',
                    deny: 'ปฎิเสธ',
                    link: 'อ่านนโยบายการคุ้มครองข้อมูลส่วนบุคคล และนโยบายคุกกี้',
                    href: 'https://npi-pipe.com/privacypolicy',
                    close: '&#x274c;',
                    policy: 'ยกเลิกการให้สิทธิ์การใช้คุกกี้',
                    target: '_blank',
                    allow: "ยอมรับ",
                },
                // Reload the page on user choice to make sure cookie is set
                onStatusChange: function(status, chosenBefore) {
                    location.reload();
                }
            })
        });
    </script>
    <div id="app"></div>
    <!-- built files will be auto injected -->
</body>

</html>